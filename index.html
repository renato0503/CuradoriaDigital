<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Curadoria Digital - Dashboard de Segurança</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Babel for browser-side JSX compilation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Import Map for Modules -->
    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
    "lucide-react": "https://esm.sh/lucide-react@0.292.0",
    "react-dom/": "https://esm.sh/react-dom@^19.2.1/",
    "react/": "https://esm.sh/react@^19.2.1/"
  }
}
</script>

    <style>
      body { font-family: 'Inter', sans-serif; }
      .font-mono { font-family: 'JetBrains Mono', monospace; }
      
      /* Custom Scrollbar */
      ::-webkit-scrollbar { width: 6px; }
      ::-webkit-scrollbar-track { background: #f1f5f9; }
      ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
      ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

      /* Animation Utilities */
      @keyframes scanLine {
        0% { top: 0%; opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { top: 100%; opacity: 0; }
      }
      .scan-line {
        position: absolute;
        width: 100%;
        height: 2px;
        background: #3b82f6;
        box-shadow: 0 0 4px #3b82f6;
        animation: scanLine 2s linear infinite;
        z-index: 10;
      }
    </style>
  </head>
  <body class="bg-slate-100 text-slate-800 antialiased h-screen overflow-hidden flex">
    <div id="root" class="w-full h-full flex"></div>

    <!-- Main Application Script -->
    <script type="text/babel" data-type="module" data-presets="typescript,react">
      import React, { useState, useEffect, useRef } from 'react';
      import { createRoot } from 'react-dom/client';
      import { 
        Shield, LayoutDashboard, History, Settings, Search, AlertTriangle, 
        CheckCircle2, XCircle, ChevronRight, Globe, Lock, FileCode, 
        Terminal, Loader2, Share2, Copy, Trash2, ExternalLink
      } from 'lucide-react';

      // --- UTILS & MOCK INTELLIGENCE ENGINE ---

      // Simulates a backend analysis algorithm
      const analyzeInput = async (input) => {
        return new Promise((resolve) => {
          setTimeout(() => {
            const lowerInput = input.toLowerCase();
            let score = 100;
            let threats = [];
            let type = 'url';
            let details = [];

            // Simple Heuristics for the Demo
            if (!lowerInput.includes('.') && !lowerInput.includes('http')) {
               type = 'text';
            }

            // Checks
            if (lowerInput.includes('http:')) {
              score -= 20;
              threats.push("Protocolo inseguro (HTTP)");
              details.push({ label: "SSL/TLS", value: "Ausente", status: "danger" });
            } else {
              details.push({ label: "SSL/TLS", value: "Válido (Simulado)", status: "success" });
            }

            if (lowerInput.length > 50) {
              score -= 10;
              details.push({ label: "Comprimento URL", value: "Longo/Suspeito", status: "warning" });
            } else {
              details.push({ label: "Comprimento URL", value: "Padrão", status: "success" });
            }

            const suspiciousKeywords = ['free', 'gratis', 'ganhar', 'win', 'crypto', 'login', 'update', 'urgente', 'bank'];
            const foundKeywords = suspiciousKeywords.filter(k => lowerInput.includes(k));
            
            if (foundKeywords.length > 0) {
              score -= (foundKeywords.length * 15);
              threats.push(`Palavras de gatilho detectadas: ${foundKeywords.join(', ')}`);
              details.push({ label: "Análise Semântica", value: "Gatilhos de Phishing", status: "danger" });
            } else {
              details.push({ label: "Análise Semântica", value: "Limpo", status: "success" });
            }

            // Whois Simulation
            const domain = lowerInput.split('/')[2] || lowerInput.split('/')[0];
            const trusted = ['google.com', 'amazon.com', 'microsoft.com', 'apple.com', 'github.com'];
            
            if (trusted.some(t => domain.includes(t))) {
              score = 100; // Whitelist override
              threats = [];
              details.push({ label: "Reputação de Domínio", value: "Alta Autoridade", status: "success" });
            } else if (score < 100) {
               details.push({ label: "Reputação de Domínio", value: "Desconhecido/Baixo", status: "warning" });
            }

            // Final Calculation
            let riskLevel = 'safe';
            if (score < 50) riskLevel = 'danger';
            else if (score < 80) riskLevel = 'warning';

            resolve({
              id: Date.now(),
              date: new Date().toISOString(),
              input,
              type,
              score: Math.max(0, score),
              riskLevel,
              threats,
              details,
              domain: type === 'url' ? domain : 'N/A'
            });
          }, 2500); // 2.5s simulated delay
        });
      };

      // --- COMPONENTS ---

      const Sidebar = ({ activeTab, setActiveTab }) => (
        <aside className="w-20 lg:w-64 bg-slate-900 text-slate-300 flex flex-col justify-between shrink-0 transition-all duration-300">
          <div>
            <div className="h-16 flex items-center justify-center lg:justify-start lg:px-6 border-b border-slate-800">
              <Shield className="text-blue-500 w-8 h-8" />
              <span className="hidden lg:block ml-3 font-bold text-white text-lg tracking-tight">Curadoria<span className="text-blue-500">.ai</span></span>
            </div>
            
            <nav className="mt-8 space-y-2 px-2 lg:px-4">
              <button 
                onClick={() => setActiveTab('scanner')}
                className={`w-full flex items-center p-3 rounded-lg transition-colors ${activeTab === 'scanner' ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/50' : 'hover:bg-slate-800 hover:text-white'}`}
              >
                <Search className="w-6 h-6 shrink-0" />
                <span className="hidden lg:block ml-3 font-medium">Novo Scan</span>
              </button>
              
              <button 
                onClick={() => setActiveTab('history')}
                className={`w-full flex items-center p-3 rounded-lg transition-colors ${activeTab === 'history' ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/50' : 'hover:bg-slate-800 hover:text-white'}`}
              >
                <History className="w-6 h-6 shrink-0" />
                <span className="hidden lg:block ml-3 font-medium">Histórico</span>
              </button>
            </nav>
          </div>

          <div className="p-4 border-t border-slate-800">
             <button className="w-full flex items-center justify-center lg:justify-start p-2 hover:bg-slate-800 rounded-lg text-slate-400 hover:text-white transition-colors">
                <Settings className="w-5 h-5 shrink-0" />
                <span className="hidden lg:block ml-3 text-sm">Configurações</span>
             </button>
          </div>
        </aside>
      );

      const ScoreGauge = ({ score, riskLevel }) => {
        const color = riskLevel === 'safe' ? 'text-emerald-500' : riskLevel === 'warning' ? 'text-amber-500' : 'text-red-500';
        const bg = riskLevel === 'safe' ? 'bg-emerald-500' : riskLevel === 'warning' ? 'bg-amber-500' : 'bg-red-500';
        
        return (
          <div className="flex items-center gap-4">
            <div className="relative w-20 h-20 flex items-center justify-center">
              <svg className="w-full h-full transform -rotate-90">
                <circle cx="40" cy="40" r="36" stroke="currentColor" strokeWidth="8" fill="transparent" className="text-slate-200" />
                <circle cx="40" cy="40" r="36" stroke="currentColor" strokeWidth="8" fill="transparent" 
                  strokeDasharray={226} 
                  strokeDashoffset={226 - (226 * score) / 100} 
                  className={`${color} transition-all duration-1000 ease-out`} 
                />
              </svg>
              <span className={`absolute text-xl font-bold ${color}`}>{score}</span>
            </div>
            <div>
              <div className="text-sm text-slate-500 uppercase font-semibold tracking-wider">Score de Confiança</div>
              <div className={`text-2xl font-bold ${color} capitalize`}>
                {riskLevel === 'safe' ? 'Seguro' : riskLevel === 'warning' ? 'Suspeito' : 'Perigoso'}
              </div>
            </div>
          </div>
        );
      };

      const ResultCard = ({ result, onReset }) => {
        if (!result) return null;

        const isSafe = result.riskLevel === 'safe';

        return (
          <div className="animate-in fade-in slide-in-from-bottom-4 duration-500">
            {/* Header / Summary */}
            <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-200 mb-6">
              <div className="flex flex-col md:flex-row md:items-center justify-between gap-6">
                <ScoreGauge score={result.score} riskLevel={result.riskLevel} />
                
                <div className="flex gap-3">
                  <button className="flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 transition-colors font-medium">
                    <Share2 size={18} /> Compartilhar
                  </button>
                  <button onClick={onReset} className="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-md shadow-blue-200">
                    Nova Análise
                  </button>
                </div>
              </div>
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
              {/* Details Column */}
              <div className="lg:col-span-2 space-y-6">
                
                {/* Technical Details */}
                <div className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                   <div className="bg-slate-50 px-6 py-4 border-b border-slate-200 flex items-center gap-2">
                      <Terminal size={18} className="text-slate-500" />
                      <h3 className="font-semibold text-slate-700">Relatório Técnico</h3>
                   </div>
                   <div className="p-6">
                      <div className="space-y-4">
                        {result.details.map((detail, idx) => (
                          <div key={idx} className="flex items-center justify-between p-3 rounded-lg bg-slate-50 border border-slate-100">
                            <span className="text-slate-600 font-medium">{detail.label}</span>
                            <div className="flex items-center gap-2">
                              <span className={`text-sm font-semibold 
                                ${detail.status === 'success' ? 'text-emerald-600' : 
                                  detail.status === 'warning' ? 'text-amber-600' : 'text-red-600'}`}>
                                {detail.value}
                              </span>
                              {detail.status === 'success' ? <CheckCircle2 size={16} className="text-emerald-500"/> : 
                               detail.status === 'warning' ? <AlertTriangle size={16} className="text-amber-500"/> : 
                               <XCircle size={16} className="text-red-500"/>}
                            </div>
                          </div>
                        ))}
                      </div>

                      <div className="mt-6 pt-6 border-t border-slate-100">
                        <h4 className="text-sm font-semibold text-slate-900 mb-3">Ativo Analisado</h4>
                        <div className="bg-slate-900 rounded-lg p-4 font-mono text-sm text-slate-300 break-all flex items-start gap-3">
                          <Globe size={16} className="shrink-0 mt-1 text-blue-400"/>
                          {result.input}
                        </div>
                      </div>
                   </div>
                </div>

              </div>

              {/* Threats Column */}
              <div className="space-y-6">
                 <div className={`rounded-2xl shadow-sm border p-6 ${isSafe ? 'bg-emerald-50 border-emerald-100' : 'bg-red-50 border-red-100'}`}>
                    <div className="flex items-center gap-3 mb-4">
                      {isSafe ? <Shield className="text-emerald-600" size={24}/> : <AlertTriangle className="text-red-600" size={24}/>}
                      <h3 className={`font-bold ${isSafe ? 'text-emerald-900' : 'text-red-900'}`}>
                        {isSafe ? 'Nenhuma Ameaça Detectada' : 'Atenção Necessária'}
                      </h3>
                    </div>
                    
                    {result.threats.length > 0 ? (
                      <ul className="space-y-3">
                        {result.threats.map((threat, idx) => (
                          <li key={idx} className="flex items-start gap-2 text-sm text-red-700 bg-red-100/50 p-2 rounded">
                            <XCircle size={16} className="shrink-0 mt-0.5" />
                            {threat}
                          </li>
                        ))}
                      </ul>
                    ) : (
                      <p className="text-emerald-700 text-sm leading-relaxed">
                        Nossos sistemas não detectaram comportamentos maliciosos conhecidos nesta URL. Continue navegando com atenção.
                      </p>
                    )}
                 </div>
                 
                 <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
                    <h3 className="font-semibold text-slate-800 mb-4">Recomendação do Curador</h3>
                    <p className="text-slate-600 text-sm leading-relaxed mb-4">
                      {isSafe 
                        ? "O link parece legítimo. Verifique sempre se o domínio (ex: google.com) corresponde exatamente ao serviço que você espera."
                        : "Recomendamos NÃO clicar neste link ou fornecer dados pessoais. A pontuação de risco indica alta probabilidade de fraude."}
                    </p>
                    <div className="flex gap-2">
                       {isSafe 
                        ? <span className="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-emerald-100 text-emerald-700 text-xs font-bold uppercase">Aprovado</span>
                        : <span className="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-red-100 text-red-700 text-xs font-bold uppercase">Bloqueado</span>
                       }
                    </div>
                 </div>
              </div>
            </div>
          </div>
        );
      };

      const Scanner = ({ onScanComplete }) => {
        const [input, setInput] = useState('');
        const [isScanning, setIsScanning] = useState(false);
        const [progress, setProgress] = useState(0);
        const [currentStep, setCurrentStep] = useState('Inicializando...');

        const handleScan = async (e) => {
          e.preventDefault();
          if (!input) return;

          setIsScanning(true);
          setProgress(0);
          
          // Simulation steps
          const steps = [
             { p: 20, t: "Resolvendo DNS..." },
             { p: 45, t: "Verificando Certificados SSL..." },
             { p: 70, t: "Consultando Blacklists Globais..." },
             { p: 90, t: "Executando Análise Heurística..." }
          ];

          for (const step of steps) {
             setCurrentStep(step.t);
             setProgress(step.p);
             await new Promise(r => setTimeout(r, 600)); 
          }

          const result = await analyzeInput(input);
          
          setProgress(100);
          setCurrentStep("Concluído!");
          await new Promise(r => setTimeout(r, 400));
          
          setIsScanning(false);
          onScanComplete(result);
        };

        if (isScanning) {
          return (
            <div className="max-w-2xl mx-auto mt-20 text-center">
              <div className="relative w-24 h-24 mx-auto mb-8 bg-blue-50 rounded-full flex items-center justify-center">
                <Loader2 className="w-12 h-12 text-blue-600 animate-spin" />
                <div className="absolute inset-0 rounded-full border-4 border-blue-100 border-t-blue-600 animate-spin"></div>
              </div>
              
              <h2 className="text-2xl font-bold text-slate-800 mb-2">{currentStep}</h2>
              <p className="text-slate-500 mb-8">Analisando infraestrutura e reputação...</p>

              <div className="bg-slate-200 h-2 w-full rounded-full overflow-hidden">
                <div 
                  className="h-full bg-blue-600 transition-all duration-500 ease-out" 
                  style={{ width: `${progress}%` }}
                ></div>
              </div>
              <div className="mt-4 font-mono text-sm text-slate-400">
                {input}
              </div>
            </div>
          );
        }

        return (
          <div className="max-w-3xl mx-auto mt-12 animate-in fade-in slide-in-from-bottom-4 duration-700">
             <div className="text-center mb-10">
               <h1 className="text-3xl md:text-4xl font-bold text-slate-900 mb-4">Verificação de Segurança</h1>
               <p className="text-slate-500 text-lg">
                 Cole um link, domínio ou texto para analisar possíveis ameaças em tempo real.
               </p>
             </div>

             <div className="bg-white p-2 rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-200">
               <form onSubmit={handleScan} className="relative">
                 <div className="absolute top-0 left-0 h-full w-14 flex items-center justify-center text-slate-400">
                    <Search size={24} />
                 </div>
                 <input
                   type="text"
                   placeholder="Ex: https://promocao-imperdivel.com/oferta"
                   className="w-full h-16 pl-14 pr-36 rounded-xl bg-transparent text-lg text-slate-800 placeholder:text-slate-400 focus:outline-none"
                   value={input}
                   onChange={(e) => setInput(e.target.value)}
                   autoFocus
                 />
                 <button 
                   type="submit"
                   disabled={!input}
                   className="absolute right-2 top-2 bottom-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 rounded-lg font-semibold transition-all"
                 >
                   Analisar
                 </button>
               </form>
             </div>

             <div className="mt-12 grid grid-cols-1 md:grid-cols-3 gap-6">
                <div className="p-4 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col items-center text-center">
                   <div className="w-10 h-10 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mb-3">
                      <Lock size={20} />
                   </div>
                   <h3 className="font-semibold text-slate-800">Phishing</h3>
                   <p className="text-xs text-slate-500 mt-1">Detecção de páginas clonadas e roubo de dados.</p>
                </div>
                <div className="p-4 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col items-center text-center">
                   <div className="w-10 h-10 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mb-3">
                      <Globe size={20} />
                   </div>
                   <h3 className="font-semibold text-slate-800">Reputação</h3>
                   <p className="text-xs text-slate-500 mt-1">Histórico de domínio e validação de Whois.</p>
                </div>
                <div className="p-4 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col items-center text-center">
                   <div className="w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mb-3">
                      <FileCode size={20} />
                   </div>
                   <h3 className="font-semibold text-slate-800">Malware</h3>
                   <p className="text-xs text-slate-500 mt-1">Verificação de assinaturas digitais suspeitas.</p>
                </div>
             </div>
          </div>
        );
      };

      const HistoryView = ({ history, onLoadItem, onDeleteItem }) => {
        if (history.length === 0) {
          return (
            <div className="flex flex-col items-center justify-center h-96 text-slate-400">
               <History size={48} className="mb-4 opacity-20" />
               <p>Nenhum histórico de análise encontrado.</p>
            </div>
          );
        }

        return (
          <div className="max-w-4xl mx-auto animate-in fade-in zoom-in-95 duration-500">
            <h2 className="text-2xl font-bold text-slate-900 mb-6 flex items-center gap-2">
              <History className="text-blue-600" />
              Histórico Recente
            </h2>
            <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
               {history.map((item) => (
                 <div key={item.id} className="flex items-center justify-between p-4 border-b border-slate-100 last:border-0 hover:bg-slate-50 transition-colors">
                    <div className="flex items-center gap-4 overflow-hidden">
                       <div className={`w-10 h-10 rounded-full flex items-center justify-center shrink-0 
                          ${item.riskLevel === 'safe' ? 'bg-emerald-100 text-emerald-600' : 
                            item.riskLevel === 'warning' ? 'bg-amber-100 text-amber-600' : 'bg-red-100 text-red-600'}`}>
                          {item.riskLevel === 'safe' ? <Shield size={20} /> : <AlertTriangle size={20} />}
                       </div>
                       <div className="min-w-0">
                          <p className="font-medium text-slate-900 truncate pr-4">{item.input}</p>
                          <p className="text-xs text-slate-500 flex items-center gap-2">
                             <span>{new Date(item.date).toLocaleTimeString()}</span>
                             <span>•</span>
                             <span className="capitalize">{item.type}</span>
                          </p>
                       </div>
                    </div>
                    <div className="flex items-center gap-2">
                       <span className={`px-3 py-1 rounded-full text-xs font-bold uppercase hidden md:inline-block
                          ${item.riskLevel === 'safe' ? 'bg-emerald-100 text-emerald-700' : 
                            item.riskLevel === 'warning' ? 'bg-amber-100 text-amber-700' : 'bg-red-100 text-red-700'}`}>
                          {item.score}/100
                       </span>
                       <button onClick={() => onLoadItem(item)} className="p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors">
                          <ExternalLink size={18} />
                       </button>
                       <button onClick={() => onDeleteItem(item.id)} className="p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors">
                          <Trash2 size={18} />
                       </button>
                    </div>
                 </div>
               ))}
            </div>
          </div>
        );
      };

      // --- MAIN APP COMPONENT ---

      const App = () => {
        const [activeTab, setActiveTab] = useState('scanner');
        const [history, setHistory] = useState([]);
        const [currentResult, setCurrentResult] = useState(null);

        const handleScanComplete = (result) => {
          setCurrentResult(result);
          setHistory(prev => [result, ...prev]);
        };

        const handleReset = () => {
          setCurrentResult(null);
        };

        const loadFromHistory = (item) => {
          setCurrentResult(item);
          setActiveTab('scanner');
        };

        const deleteFromHistory = (id) => {
           setHistory(prev => prev.filter(i => i.id !== id));
        };

        return (
          <div className="flex w-full h-full bg-slate-50">
            <Sidebar activeTab={activeTab} setActiveTab={setActiveTab} />
            
            <main className="flex-1 overflow-auto relative">
              
              {/* Top Bar (Mobile/Tablet) */}
              <div className="lg:hidden h-16 bg-white border-b border-slate-200 flex items-center justify-center px-4 sticky top-0 z-20">
                 <Shield className="text-blue-500 w-6 h-6 mr-2" />
                 <span className="font-bold text-slate-900">Curadoria.ai</span>
              </div>

              <div className="p-4 md:p-8 lg:p-12 max-w-7xl mx-auto">
                
                {activeTab === 'scanner' && (
                  <>
                    {!currentResult ? (
                       <Scanner onScanComplete={handleScanComplete} />
                    ) : (
                       <ResultCard result={currentResult} onReset={handleReset} />
                    )}
                  </>
                )}

                {activeTab === 'history' && (
                  <HistoryView 
                    history={history} 
                    onLoadItem={loadFromHistory} 
                    onDeleteItem={deleteFromHistory}
                  />
                )}

              </div>
            </main>
          </div>
        );
      };

      const root = createRoot(document.getElementById('root'));
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
    </script>
  </body>
</html>